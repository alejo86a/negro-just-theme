{% comment %}
  Collection Banners Section - Split banner for BUSOS and GORRAS
{% endcomment %}

<div class="collection-banners color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width">
    <div class="collection-banners__carousel">
      {%- liquid
        assign blocks_per_grid = 2
        assign grid_count = section.blocks.size | divided_by: blocks_per_grid
        assign remainder = section.blocks.size | modulo: blocks_per_grid
        if remainder > 0
          assign grid_count = grid_count | plus: 1
        endif
      -%}
      
      {%- for grid_index in (1..grid_count) -%}
        {%- assign start_index = grid_index | minus: 1 | times: blocks_per_grid -%}
        {%- assign end_index = start_index | plus: blocks_per_grid | minus: 1 -%}
        {%- if start_index < section.blocks.size -%}
          <div class="collection-banners__grid grid grid--2-col{% if grid_index == 1 %} active{% endif %}">
            {%- for block in section.blocks limit: blocks_per_grid offset: start_index -%}
              <div class="collection-banner" {{ block.shopify_attributes }}>
                {%- if block.settings.image != blank -%}
                  <a href="{{ block.settings.collection.url }}" class="collection-banner__link">
                    <div class="collection-banner__media">
                      <img
                        srcset="{%- if block.settings.image.width >= 375 -%}{{ block.settings.image | image_url: width: 375 }} 375w,{%- endif -%}
                                {%- if block.settings.image.width >= 750 -%}{{ block.settings.image | image_url: width: 750 }} 750w,{%- endif -%}
                                {%- if block.settings.image.width >= 1100 -%}{{ block.settings.image | image_url: width: 1100 }} 1100w,{%- endif -%}
                                {{ block.settings.image | image_url }} {{ block.settings.image.width }}w"
                        src="{{ block.settings.image | image_url: width: 750 }}"
                        sizes="(min-width: 750px) 50vw, 100vw"
                        alt="{{ block.settings.heading | escape }}"
                        loading="lazy"
                        width="{{ block.settings.image.width }}"
                        height="{{ block.settings.image.height }}"
                        class="collection-banner__image"
                      >
                    </div>
                    <div class="collection-banner__content">
                      {%- if block.settings.heading != blank -%}
                        <h3 class="collection-banner__heading h2">{{ block.settings.heading }}</h3>
                      {%- endif -%}
                      {%- if block.settings.text != blank -%}
                        <p class="collection-banner__text">{{ block.settings.text }}</p>
                      {%- endif -%}
                    </div>
                  </a>
                {%- else -%}
                  <div class="collection-banner__placeholder">
                    {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
                  </div>
                {%- endif -%}
              </div>
            {%- endfor -%}
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Collection Banners",
  "tag": "section",
  "class": "section-collection-banners",
  "settings": [
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "Accent 1"
        },
        {
          "value": "accent-2",
          "label": "Accent 2"
        },
        {
          "value": "background-1",
          "label": "Background 1"
        },
        {
          "value": "background-2",
          "label": "Background 2"
        },
        {
          "value": "inverse",
          "label": "Inverse"
        }
      ],
      "default": "background-1",
      "label": "Color scheme"
    }
  ],
  "blocks": [
    {
      "type": "banner",
      "name": "Collection Banner",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        },
        {
          "type": "text",
          "id": "heading",
          "default": "Collection Name",
          "label": "Heading"
        },
        {
          "type": "text",
          "id": "text",
          "default": "Shop the collection",
          "label": "Text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Collection Banners",
      "blocks": [
        {
          "type": "banner",
          "settings": {
            "heading": "BUSOS"
          }
        },
        {
          "type": "banner",
          "settings": {
            "heading": "GORRAS"
          }
        },
        {
          "type": "banner",
          "settings": {
            "heading": "MEDIAS"
          }
        },
        {
          "type": "banner",
          "settings": {
            "heading": "CAMISETAS"
          }
        }
      ]
    }
  ]
}
{% endschema %}

