{% comment %}
  Newsletter & Location Section
{% endcomment %}

<div class="newsletter-location color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width">
    {%- if section.settings.title != blank -%}
      <h2 class="newsletter-location__title h2">{{ section.settings.title }}</h2>
    {%- endif -%}

    <div class="newsletter-location__grid grid grid--2-col">
      <div class="newsletter-location__address">
        {%- if section.settings.address_title != blank -%}
          <h3 class="newsletter-location__address-title h3">{{ section.settings.address_title }}</h3>
        {%- endif -%}
        {%- if section.settings.address != blank -%}
          <div class="newsletter-location__address-text rte">{{ section.settings.address }}</div>
        {%- endif -%}
        {%- if section.settings.address_link != blank -%}
          <a href="{{ section.settings.address_link }}" class="button button--secondary" target="_blank" rel="noopener noreferrer">
            {{ section.settings.address_link_text | default: 'Ver en mapa' }}
          </a>
        {%- endif -%}
      </div>

      <div class="newsletter-location__newsletter">
        {%- if section.settings.newsletter_title != blank -%}
          <h3 class="newsletter-location__newsletter-title h3">{{ section.settings.newsletter_title }}</h3>
        {%- endif -%}
        {%- if section.settings.newsletter_text != blank -%}
          <p class="newsletter-location__newsletter-text">{{ section.settings.newsletter_text }}</p>
        {%- endif -%}
        {% form 'customer', class: 'newsletter-form' %}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="newsletter-form__field-wrapper">
            <div class="field">
              <input
                id="NewsletterForm--{{ section.id }}"
                type="email"
                name="contact[email]"
                class="field__input"
                value="{{ form.email }}"
                aria-required="true"
                autocorrect="off"
                autocapitalize="off"
                autocomplete="email"
                {% if form.errors %}
                  autofocus
                  aria-invalid="true"
                  aria-describedby="Newsletter-error--{{ section.id }}"
                {% elsif form.posted_successfully? %}
                  aria-describedby="Newsletter-success--{{ section.id }}"
                {% endif %}
                placeholder="{{ 'newsletter.label' | t }}"
                required
              >
              <label class="field__label" for="NewsletterForm--{{ section.id }}">
                {{ 'newsletter.label' | t }}
              </label>
            </div>
            <button type="submit" class="button button--primary newsletter-form__button" name="commit" id="Subscribe">
              {{ 'newsletter.button_label' | t }}
            </button>
          </div>
          {%- if form.errors -%}
            <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
              {{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}.
            </small>
          {%- endif -%}
          {%- if form.posted_successfully? -%}
            <h3 class="newsletter-form__message newsletter-form__message--success form__message" id="Newsletter-success--{{ section.id }}" tabindex="-1" autofocus>
              {{ 'newsletter.success' | t }}
            </h3>
          {%- endif -%}
        {% endform %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Newsletter & Location",
  "tag": "section",
  "class": "section-newsletter-location",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "default": "VERDOLAGA, ¡VISÍTANOS Y SUSCRÍBETE!",
      "label": "Section Title"
    },
    {
      "type": "text",
      "id": "address_title",
      "default": "Ubicación",
      "label": "Address Title"
    },
    {
      "type": "richtext",
      "id": "address",
      "default": "<p>Calle 123, Ciudad<br>Colombia</p>",
      "label": "Address"
    },
    {
      "type": "url",
      "id": "address_link",
      "label": "Address Link (Map URL)"
    },
    {
      "type": "text",
      "id": "address_link_text",
      "default": "Ver en mapa",
      "label": "Address Link Text"
    },
    {
      "type": "text",
      "id": "newsletter_title",
      "default": "Newsletter",
      "label": "Newsletter Title"
    },
    {
      "type": "text",
      "id": "newsletter_text",
      "default": "Suscríbete para recibir las últimas novedades y ofertas exclusivas",
      "label": "Newsletter Text"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "Accent 1"
        },
        {
          "value": "accent-2",
          "label": "Accent 2"
        },
        {
          "value": "background-1",
          "label": "Background 1"
        },
        {
          "value": "background-2",
          "label": "Background 2"
        },
        {
          "value": "inverse",
          "label": "Inverse"
        }
      ],
      "default": "background-2",
      "label": "Color Scheme"
    }
  ],
  "presets": [
    {
      "name": "Newsletter & Location"
    }
  ]
}
{% endschema %}

